<?xml version="1.0"?>
<component name="org.nuxeo.coldstorage.bulk.contrib">

  <extension target="org.nuxeo.ecm.core.bulk" point="actions">
    <action name="propagateMoveToColdStorage" bucketSize="100" batchSize="50" httpEnabled="false" />
  </extension>

  <extension target="org.nuxeo.ecm.core.bulk" point="actions">
    <action name="propagateRestoreFromColdStorage" bucketSize="100" batchSize="50" httpEnabled="false" />
  </extension>

  <extension target="org.nuxeo.runtime.stream.service" point="streamProcessor">
    <streamProcessor name="propagateMoveToColdStorage"
      class="org.nuxeo.coldstorage.action.PropagateMoveToColdStorageContentAction" logConfig="bulk"
      defaultConcurrency="2" defaultPartitions="2">
      <policy name="default" maxRetries="3" delay="1s" maxDelay="10s" continueOnFailure="true" />
      <option name="produceImmediate">false</option>
    </streamProcessor>
  </extension>

  <extension target="org.nuxeo.runtime.stream.service" point="streamProcessor">
    <streamProcessor name="propagateRestoreFromColdStorage"
      class="org.nuxeo.coldstorage.action.PropagateRestoreFromColdStorageContentAction" logConfig="bulk"
      defaultConcurrency="2" defaultPartitions="2">
      <policy name="default" maxRetries="3" delay="1s" maxDelay="10s" continueOnFailure="true" />
      <option name="produceImmediate">false</option>
    </streamProcessor>
  </extension>

</component>
